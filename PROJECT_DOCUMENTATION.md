# ๐ ุชูุซูู ูุดุฑูุน "ูุฏู" (Nada Project Documentation)

ูุฐุง ุงูููู ูู ุงููุฑุฌุน ุงูุดุงูู (The Bible) ูููุดุฑูุน. ูุญุชูู ุนูู ุดุฑุญ ุชููู ููุตู ููู ุฌุฒุก ูู ุงูููุฏุ ุงูุจููุฉ ุงูุชุญุชูุฉุ ูููุงุนุฏ ุงูุจูุงูุงุชุ ุจุญูุซ ูููู ูุฃู ูุทูุฑ (ุฃู ูุญู ูู ุงููุณุชูุจู) ููู ุงููุดุฑูุน ูุงูุชุนุฏูู ุนููู ุจุณูููุฉ.

---

## ๐๏ธ 1. ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ (Tech Stack)

ุงููุดุฑูุน ูุจูู ุจุฃุณููุจ **Single Page Application (SPA)** ุญุฏูุซ ุฌุฏุงู ููุญุณู ููุนูู ูู **Progressive Web App (PWA)**.

-   **Frontend Framework:** React 18
-   **Build Tool:** Vite (v7.2.7) - ุณุฑูุน ุฌุฏุงู ูู ุงูุชุทููุฑ ูุงูู Production Build.
-   **Styling:** Tailwind CSS (ุชุตููู ุนุตุฑู ูุณุฑูุน) + CSS Modules (ููุญุงุฌุงุช ุงููุฎุตุตุฉ).
-   **Animations:** Framer Motion (ููุญุฑูุงุช ุงูุณูุณุฉ ูุงูุชูููุงุช).
-   **Icons:** Lucide React.
-   **Backend / Database:** Supabase (PostgreSQL + Realtime).
-   **Routing:** Custom Hash Routing (ุชู ุงุฎุชูุงุฑู ูุฏุนู PWA ุจุดูู ุฃูุถู ูุงูุชุญูู ูู ุฒุฑ ุงูุฑุฌูุน).

---

## ๐ 2. ููููุฉ ุงููุดุฑูุน (Project Structure)

ุงููุดุฑูุน ููุฌูุฏ ุฏุงุฎู ูุฌูุฏ `src`. ุงูุชูุณูู ูุงูุชุงูู:

### `src/components`
ูุญุชูู ุนูู ููููุงุช ุงููุงุฌูุฉ ููุณูุฉ ุญุณุจ ุงููุธููุฉ:
-   **`MainApp`**: ุงูุญุงููุฉ ุงูุฑุฆูุณูุฉ ููุชุทุจูู (ุจุนุฏ ุชุณุฌูู ุงูุฏุฎูู).
    -   **`MainApp.jsx`**: ุงููุชุญูู ุงูุฑุฆูุณู ูู ุงูุชููู (Navigation) ูุญุงูุฉ ุงูุชุจููุจ ุงููุดุท (`activeTab`).
    -   **`Navigation.jsx`**: ุดุฑูุท ุงูุชููู ุงูุณููู (Bottom Bar).
    -   **`Header.jsx`**: ุงูุดุฑูุท ุงูุนููู (ูุญุชูู ุนูู ุงูุฅุดุนุงุฑุงุช ูุตูุฑุฉ ุงูุจุฑููุงูู).
-   **`Admin`**: ููุญุฉ ุชุญูู ุงูุฃุฏูู (Dashbaord).
    -   **`AdminDashboard.jsx`**: ููู ุถุฎู ูุฏูุฑ ูู ุดูุก (ุงููุฑุงูุจุฉุ ุงูุฅุญุตุงุฆูุงุชุ ุงููุนุฑุถ).
    -   **`components/UserMonitorCard.jsx`**: ูุงุฑุช ูุฑุงูุจุฉ ุงููุณุชุฎุฏููู (ูุธูุฑ ุงูุญุงูุฉ ูุงููุชุตููู).
-   **`Auth`**: ุตูุญุงุช ุชุณุฌูู ุงูุฏุฎูู (`LoginPage.jsx`).
-   **`Common`**: ููููุงุช ูุดุชุฑูุฉ.
    -   **`MusicPlayer/FloatingDisc.jsx`**: ูุดุบู ุงูููุณููู ุงูุนุงุฆู (ุงูุฃุณุทูุงูุฉ).
-   **`MainApp/Messages`**: ูุธุงู ุงูุดุงุช.
    -   **`MessagesPage.jsx`**: ุตูุญุฉ ุงูุดุงุช ุงูุฑุฆูุณูุฉ (ุงูุฑุณุงุฆูุ ุงูุฅูููุฌูุ ุงููุฑููุงุช).
-   **`MainApp/Gallery`**: ูุนุฑุถ ุงูุฐูุฑูุงุช (`MemoriesGallery.jsx`).
-   **`MainApp/Settings`**: ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช (`SettingsPage.jsx`).

### `src/context`
ูุญุชูู ุนูู ุงูู Global State (React Context):
-   **`AuthContext.jsx`**: ุฅุฏุงุฑุฉ ุญุงูุฉ ุงููุณุชุฎุฏู (Login/Logout) ูุงูุตูุงุญูุงุช (`currentUser`, `userRole`).
-   **`PresenceContext.jsx`**: **(ููู ุฌุฏุงู)** ุฅุฏุงุฑุฉ ุญุงูุฉ "ุงูุฃูููุงูู" ูุงูุชูุงุฌุฏ (Realtime Presence) ููุถุน ุงูุดุจุญ (Ghost Mode).
-   **`MusicContext.jsx`**: ุฅุฏุงุฑุฉ ุชุดุบูู ุงูููุณููู (Play/Pause, Playlist, Volume).

### `src/supabase.js`
ููู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช. ูุญุชูู ุนูู `supabaseUrl` ู `supabaseKey`.

---

## ๐ง 3. ุงูุฃูุธูุฉ ุงูุฃุณุงุณูุฉ (Core Systems Logic)

### ุฃ. ูุธุงู ุงูุชููู ูุงูุฒุฑ ุงูุฎููู (Smart Navigation & Back Button)
-   **ุงููุดููุฉ:** ูู ุชุทุจููุงุช ุงูููุจ (PWA)ุ ุฒุฑ ุงูุฑุฌูุน ูู ุงูููุจุงูู ุนุงุฏุฉ ุจูุฎุฑุฌ ูู ุงูุจุฑูุงูุฌ.
-   **ุงูุญู:** ุงุณุชุฎุฏููุง `window.location.hash` ููุชุญูู ูู ุงููุณุงุฑ.
-   **ุงูููุทู:**
    1.  ุนูุฏ ูุชุญ ุฃู ูุงุฆูุฉ (ูุซูุงู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ ููุฃุฏูู)ุ ูุถูู `#admin-menu` ููุฑุงุจุท.
    2.  ุนูุฏ ูุชุญ ุงูุฅูููุฌูุ ูุถูู `#emoji`.
    3.  ุนูุฏ ูุชุญ ุฎูุงุฑุงุช ุงูุฑุณุงูุฉ (ุชุนุฏูู/ุญุฐู)ุ ูุถูู `#message-options`.
    4.  ูุณุชูุน ูุญุฏุซ `hashchange`. ูู ุงููุณุชุฎุฏู ุฏุงุณ "ุฑุฌูุน"ุ ุงููุชุตูุญ ุจูุดูู ุงูู Hashุ ูุงูู Code ุจุชุงุนูุง ุจูููู ุงููุงุฆูุฉ ุฏู ุจุฏูุงู ูู ุงูุฎุฑูุฌ.
    5.  **ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ:** ุฏุงุฆูุงู ุงูุชุทุจูู ุจููุชุญ ุนูู `activeTab = 'home'`. ุฒุฑ ุงูุฑุฌูุน ุจูุฑุฌุนู ููู Home ูุจู ูุง ูุฎุฑุฌ.

### ุจ. ูุถุน ุงูุดุจุญ (Ghost Mode ๐ป)
-   **ุงูููุงู:** `PresenceContext.jsx` + `SettingsPage.jsx`.
-   **ุงููุธููุฉ:** ุงููุณุชุฎุฏู ูุฎุชูู ูู "ุงูุฃูููุงูู" ุนูุฏ ุงูุขุฎุฑููุ ููู ุงูุฃุฏูู ููุถูู ุดุงููู.
-   **ุงูุฎูุงุฑุฒููุฉ:**
    1.  ูุชู ุชุฎุฒูู `is_ghost_mode` ูู ุฌุฏูู `user_profiles`.
    2.  ูู `PresenceContext`:
        -   ุฅุฐุง ูุงู `isGhostMode = true`: **ูุชููู** ุนู ุฅุฑุณุงู ุฅุดุงุฑุฉ `channel.track()` ููู Realtime. (ูุจูุฏู ุงููุณุชุฎุฏููู ุงูุชุงูููู ูุด ููุดูููู ูู ูุงุฆูุฉ `onlineUsers`).
        -   **ููู:** ุจูุณุชูุฑ ูู ุชุญุฏูุซ `last_seen` ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช (`supabase.from('user_profiles').update(...)`).
    3.  ูู `AdminDashboard`:
        -   ุจูุญุณุจ ุญุงูุฉ "ุงูุฃูููุงูู" ุจุทุฑููุชูู:
            -   ุฅูุง ููุฌูุฏ ูู `onlineUsers` (ุชูุงุฌุฏ ุญู).
            -   ุฃู `last_seen` ุจุชุงุนู ูุงู ูู ุฃูู ูู ุฏูููุชูู (ุชูุงุฌุฏ ุดุจุญู).

### ุฌ. ูุดุบู ุงูููุณููู ุงูุนุงุฆู (Floating Disc ๐ฟ)
-   **ุงูููุงู:** `FloatingDisc.jsx`.
-   **ุงููุดููุฉ:** ุงูุชุงุชุด ูุงู ุจูุนูู Play ู Drag ูู ููุณ ุงูููุชุ ุฃู ุจูุนูู Double Click ุจุงูุบูุท.
-   **ุงูุญู:**
    1.  ุงุณุชุฎุฏููุง `Pointer Events` (`onPointerDown`, `onPointerUp`) ูุชูุญูุฏ ุงูุชุนุงูู ูุน ุงููุงูุณ ูุงูุชุงุชุด.
    2.  ูุตููุง ุงูููุทู ุจูุชุบูุฑ `isDragging`:
        -   ูู ุญุฑูุช ุงูุฃุณุทูุงูุฉ > `isDragging = true` (ูุด ููุดุบู ุฃุบุงูู).
        -   ูู ููุณุช ูุดูุช ุฅูุฏู ุจุฏูู ุญุฑูุฉ > `togglePlay()`.

---

## ๐๏ธ 4. ููุงุนุฏ ุงูุจูุงูุงุช (Database Schema)

ุงูุฌุฏุงูู ุงูุฃุณุงุณูุฉ ูู Supabase:

1.  **`user_profiles`**:
    -   `id` (UUID): ููุชุงุญ ุงููุฑุจุท ุจู Auth.
    -   `display_name`, `bio`, `profile_picture`: ุจูุงูุงุช ุงูุนุฑุถ.
    -   `role`: (`admin`, `user`).
    -   `last_seen` (Timestamp): ุขุฎุฑ ุธููุฑ (ููู ููุฃุฏูู).
    -   `is_ghost_mode` (Boolean): ุญุงูุฉ ุงูุดุจุญ.
    -   `device_info`, `last_ip`: ููุชุชุจุน ุงูุฃููู.

2.  **`messages`**:
    -   `id`, `text`, `image_url`, `voice_url`.
    -   `sender_uid` (UUID).
    -   `reply_to_id` (UUID): ููุฑุฏ ุนูู ุงูุฑุณุงุฆู.
    -   `reactions`: JSON (`{ "โค": ["uid1"], "๐": ["uid2"] }`).

3.  **`login_history`**:
    -   ุณุฌู ุฏุฎูู ุงููุณุชุฎุฏููู (IP, Device, Location) ูููุฑุงูุจุฉ.

4.  **`unlocked_memories`**:
    -   ูุฎุฒู ุงูุฑููุฒ ุงูุณุฑูุฉ (Codes) ุงููู ุงููุณุชุฎุฏู ุงูุชุดููุง ุนุดุงู ููุชุญ ุตูุฑ ูู ุงููุนุฑุถ.

5.  **`user_settings`**:
    -   ุฌุฏูู ูุฑู ูุชุฎุฒูู ุฅุนุฏุงุฏุงุช ุฅุถุงููุฉ (ูุซู ุฑุจุท ุญุณุงุจ ูุฏู ุจุญุณุงุจ ุงูุฃุฏูู). ุงูููุชุงุญ `contact_key`.

---

## ๐๏ธ 5. ุงูููุงุญุธุงุช ูุงูุชุญุณููุงุช ุงููุณุชูุจููุฉ (To-Do)

1.  **ูุธุงู ุงูุฅุดุนุงุฑุงุช (Push Notifications):** ุชู ุฅูุดุงุก ุงูุฌุฏูู `fcm_tokens` ููู ูู ูุชู ุชูุนูู Firebase Cloud Messaging ุจุงููุงูู ูู ุงููุงุฌูุฉ.
2.  **ุชุณุฌูู ุงูุฏุฎูู ุจุฌูุฌู:** ูุณููุญ ุจูุ ููู ูุญุชุงุฌ ูุขููุฉ "ุฑุจุท ุงูุญุณุงุจุงุช" ูู ููุญุฉ ุงูุชุญูู ูููู ุงูุจูุงูุงุช ูู ุงูุญุณุงุจ ุงููููู ููุญุณุงุจ ุงูุญูููู (ุชู ุชุฃุฌููู).
3.  **ุชุญุณูู ุงูุฃุฏุงุก:** ููู `src/components/MainApp/MainApp.jsx` ูุจูุฑ ุฌุฏุงูุ ููุถู ุชูุณููู ูููููุงุช ุฃุตุบุฑ ูุณุชูุจูุงู.

---

*ุชู ุงูุชุญุฏูุซ ุจุชุงุฑูุฎ: 15 ุฏูุณูุจุฑ 2025*
*ุจูุงุณุทุฉ: Antigravity AI Agent*
